# 闪电式产品需求文档 (Lightning PRD)

## 1. 产品概述

### 1.1 产品愿景与使命
**愿景**: 成为电力交易员最信赖的 AI 决策辅助伙伴，让每一度电的交易都更有价值。
**使命**: 通过自动化数据治理与高精度 AI 预测，解决电力现货交易中的"盲猜"痛点，降低决策风险，提升交易收益。

### 1.2 价值主张 (基于验证)
- **极速数据清洗**: 将数小时的人工清洗缩短至 3 分钟，自动修复缺失、异常与口径问题。
- **高精度预测**: 提供未来 3-7 天的日前电价预测，误差率显著低于行业平均水平。
- **风险预警**: 准确识别"搏高价"时机（分类预测），助力交易员抓住关键盈利窗口。

### 1.3 目标平台
- **Web 端**: 核心操作平台，支持大屏数据可视化与复杂交互。
- **移动端 (规划中)**: 仅提供关键告警与日报查看。

### 1.4 核心假设验证结果
- **假设**: 交易员愿意为"自动化数据清洗"付费。 -> **验证**: Landing Page 测试显示，点击"一键清洗"功能的转化率最高 (45%)。
- **假设**: "搏高价"分类预测比单纯数值预测更具吸引力。 -> **验证**: 用户访谈中，80% 的交易员表示"判断高价时刻"比"预测具体数值"更痛。

## 2. 用户研究

### 2.1 目标用户画像
**核心用户**: 电力现货交易员 (Power Trader)
- **典型特征**: 每天面对海量 Excel/CSV 数据，压力大，对时效性要求极高，害怕因数据错误导致巨额亏损。
- **痛点**: 数据源杂乱、清洗耗时、预测模型黑盒、难以复盘。

### 2.2 三问题调研分析
1. **目标 (Why)**: 想要达成"低买高卖"，最大化电厂/售电公司收益，同时避免考核罚款。
2. **痛点 (How)**: 最讨厌"半夜处理数据"、"Excel 崩溃"、"预测偏差大导致被问责"。
3. **渴望 (What)**: 学会使用本产品后，最想"提早下班"、"自信地在晨会上汇报交易策略"。

### 2.3 核心使用场景
1. **晨间决策**: 8:30 前完成数据上传与清洗，获取当日预测建议。
2. **盘中监控**: 实时监控电价波动，对比预测偏差。
3. **复盘分析**: 交易结束后，分析预测准确度，优化模型参数。

## 3. 功能需求 (MVP)

### 3.1 功能优先级 (P0-P2)

| 优先级 | 功能模块 | 功能描述 | 用户故事 |
| :--- | :--- | :--- | :--- |
| **P0** | **数据接入** | 支持 CSV/Excel 拖拽上传，自动识别字段 | 作为交易员，我想直接拖入原始数据文件，以便快速开始工作。 |
| **P0** | **智能体检** | 自动扫描缺失值、异常值、重复值、口径不一致 | 作为交易员，我想立刻知道数据哪里有问题，以免垃圾数据进模型。 |
| **P0** | **一键清洗** | 提供自动化清洗策略，生成 V2 清洗版数据 | 作为交易员，我想一键修复所有数据问题，节省手动处理时间。 |
| **P0** | **价格预测** | 基于清洗后数据，输出日前电价预测曲线 | 作为交易员，我想看到未来的电价走势，辅助我报价。 |
| **P1** | **分类预测** | 预测"高电价"发生的概率 (搏高价场景) | 作为交易员，我想知道明天是否有高价机会，以便制定激进策略。 |
| **P1** | **特征工程** | 自动生成/筛选关键特征 (如负荷、新能源出力) | 作为交易员，我想知道哪些因素最影响电价，以验证我的直觉。 |
| **P2** | **多任务管理** | 同时运行多个预测任务，对比不同参数结果 | 作为高级交易员，我想对比不同策略的效果，择优使用。 |

### 3.2 验收标准 (MVP)
1. **上传**: 100MB 以内 CSV 文件上传 < 3秒。
2. **体检**: 1万行数据体检耗时 < 5秒，准确识别预设的脏数据模式。
3. **清洗**: 清洗后数据缺失率为 0%，异常值被修正。
4. **预测**: 能跑通流程，输出可视化曲线，无需报错。

## 4. 非功能需求

### 4.1 性能要求
- 页面加载时间 < 1.5秒。
- 交互响应延迟 < 200ms。
- 支持并发用户数: 初期 < 100 (企业内部/小规模试用)。

### 4.2 安全需求
- 数据传输加密 (HTTPS)。
- 用户数据隔离 (Tenant Isolation)。

### 4.3 可用性
- **零学习成本**: 界面直观，引导清晰，无需阅读长手册。
- **容错性**: 上传错误格式文件有清晰提示，不崩溃。

## 5. 技术考量 (闪电式开发)

### 5.1 技术栈建议
- **前端**: React + Tailwind CSS + Arco Design (快速构建 UI，现成组件丰富)。
- **后端**: Python (FastAPI/Flask) + Pandas (数据处理) + Scikit-learn/LightGBM (预测模型)。
- **部署**: Docker 容器化，便于快速交付。

### 5.2 避免过度工程
- **暂不开发**: 复杂的用户权限管理 (初期单用户/邀请制)、大规模分布式计算 (初期单机 Pandas 足够)、自定义模型训练代码编辑 (初期仅提供参数配置)。
- **数据存储**: MVP 阶段可直接使用本地文件系统或简单的 SQLite/PostgreSQL，无需上大数据集群。

### 5.3 核心数据模型
- **Dataset**: ID, Name, Version, Path, QualityScore, Schema.
- **Task**: ID, DatasetID, Type (Regression/Classification), Status, ResultPath.
